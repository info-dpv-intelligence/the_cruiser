# Make the verification script executable
chmod +x ~/dev/ros2_ws/src/the_cruiser/scripts/verify_control.sh

# Build the package
cd ~/dev/ros2_ws
colcon build --packages-select the_cruiser


----

# Source the new build
source ~/dev/ros2_ws/install/setup.zsh

# Check that the new executable exists
which cruiser_node

# Verify the lifecycle node loads correctly (should not error)
ros2 lifecycle list /cruiser_node 2>&1 | head -20

----

# Terminal 1: Start Gazebo + Nav2
cd ~/dev/ros2_ws
source install/setup.zsh
export TURTLEBOT3_MODEL=waffle
ros2 launch nav2_bringup navigation_launch.py \
  use_sim_time:=True \
  params_file:=/opt/ros/humble/share/nav2_bringup/params/nav2_params.yaml \
  map:=/opt/ros/humble/share/turtlebot3_navigation2/map/map.yaml

# Terminal 2: Launch Cruiser with coordination
cd ~/dev/ros2_ws
source install/setup.zsh
export TURTLEBOT3_MODEL=waffle
ros2 launch the_cruiser cruiser_standalone.launch.py

# Terminal 3: Run verification (after setting a Nav Goal)
cd ~/dev/ros2_ws
source install/setup.zsh
~/dev/ros2_ws/src/the_cruiser/scripts/verify_control.sh